<?xml version="1.0" encoding="UTF-8"?>

<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">

    <Fragment>

        <DirectoryRef Id="FrameworkBinFolder" FileSource="$(var.InstallImage)\bin">
            <Directory Id="FrameworkNet20Folder" Name="net-2.0">
              <Component Id="nunit.framework.dll_net2.0_dir" Guid="eee247ab-5d00-45c5-bfa5-23e0aec1cf7d">
                <!--<Condition>NOT INSTALLINGAC</Condition>-->

                <File Id="nunit.framework.dll_net2.0_dir"
                      DiskId="1"
                      KeyPath="yes"
                      Assembly="no"
                      Name="nunit.framework.dll"/>

              </Component>

              <!--
              <Component Id="nunit.framework.dll_net2.0_gac" Guid="725537ca-3e8f-4bab-9166-da4d5e91fa5f">
                <Condition>INSTALLINGAC</Condition>

                <File Id="nunit.framework.dll_net2.0_gac"
                      DiskId="1"
                      KeyPath="yes"
                      Assembly=".net"
                      Name="nunit.framework.dll"/>

              </Component>
              -->

              <Component Id="nunit.interfaces.dll_net2.0" Guid="F976DB55-FF36-461d-93B6-8DC6881F5444">
                <File Id="nunit.interfaces.dll_net2.0"
                      DiskId="1"
                      KeyPath="yes"
                      Assembly="no"
                      Name="nunit.interfaces.dll"/>

              </Component>

              <Component Id="nunit.framework.tests.dll_net2.0" Guid="4f40f59f-07de-47e6-a3ed-b4a1b71ef93a">
                <File Id="nunit.framework.tests.dll_net2.0"
                      DiskId="1"
                      KeyPath="yes"
                      Assembly="no"
                      Name="nunit.framework.tests.dll"/>

              </Component>

              <Component Id="test_assembly.dll_net2.0" Guid="E26C69C5-E06A-4e78-A21E-7F0B03CDF962">
                <File Id="test_assembly.dll_net2.0"
                      DiskId="1"
                      KeyPath="yes"
                      Assembly="no"
                      Name="test-assembly.dll"/>

              </Component>

              <Component Id="nunit.framework.xml_net2.0" Guid="79cb5e96-68f4-4002-aa04-eebc494bba89">

                <File Id="nunit.framework.xml_net2.0"
                      DiskId="1"
                      KeyPath="yes"
                      Name="nunit.framework.xml"/>

              </Component>

              <Component Id="AssemblyReferenceFolder_2.0" Guid="87667d1d-8542-41f7-99f2-b3900324d05a">
                <RegistryKey Id="R__Assemblies_2.0"
                             Action="createAndRemoveOnUninstall"
                             Root="HKLM"
                             Key="Software\Microsoft\.NETFramework\v2.0.50727\AssemblyFoldersEx\NUnit [ProductVersion]">

                  <RegistryValue Id="R__Assemblies_2.0_Default" Action="write" Type="string" Value="[FrameworkNet20Folder]"/>
                </RegistryKey>
              </Component>
            </Directory>
        </DirectoryRef>

        <PropertyRef Id="NETFRAMEWORK20SDKDIR"/>

        <Feature Id="FrameworkNet20" Title="NUnit Framework for .NET 2.0" AllowAdvertise="no" Display="expand" InstallDefault="local" Level="0" TypicalDefault="install">
          <Condition Level="1">NETFRAMEWORK20SDKDIR</Condition>
          <Condition Level="10">NOT NETFRAMEWORK20SDKDIR</Condition>
          <ComponentRef Id="nunit.framework.dll_net2.0_dir"/>
          <!--<ComponentRef Id="nunit.framework.dll_net2.0_gac"/>-->
          <ComponentRef Id="nunit.interfaces.dll_net2.0"/>
          <ComponentRef Id="nunit.framework.tests.dll_net2.0"/>
          <ComponentRef Id="test_assembly.dll_net2.0"/>
          <ComponentRef Id="nunit.framework.xml_net2.0"/>
          <ComponentRef Id="AssemblyReferenceFolder_2.0"/>
        </Feature>
        
	</Fragment>

</Wix>